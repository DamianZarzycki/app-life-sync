<div class="password-strength-container mt-2" [class.hidden]="!strengthResult">
  @if (strengthResult) {
    <!-- Strength Bar with Progress -->
    <div class="strength-bar-wrapper mb-2">
      <div class="strength-bar-background h-1 w-full rounded bg-gray-200">
        <div
          class="strength-progress h-1 rounded transition-all duration-300"
          [ngClass]="getProgressBarClass(strengthResult.level)"
          [style.width.%]="(strengthResult.score / 5) * 100"
        ></div>
      </div>
    </div>

    <!-- Strength Level Text -->
    <div class="strength-text text-sm font-semibold mt-2" [ngClass]="getStrengthTextClass(strengthResult.level)">
      Strength: <span class="capitalize">{{ strengthResult.level }}</span>
    </div>

    <!-- Criteria Details (if showDetails is true) -->
    @if (showDetails()) {
      <div class="criteria-list mt-3 space-y-1 text-sm">
        @for (criterion of getCriteria(); track criterion.label) {
          <div
            class="criteria-item flex items-center transition-colors"
            [ngClass]="criterion.met ? 'text-green-600' : 'text-gray-400'"
          >
            <i
              nz-icon
              [nzType]="criterion.met ? 'check-circle' : 'exclamation-circle'"
              class="mr-2 flex-shrink-0"
            ></i>
            <span>{{ criterion.label }}</span>
          </div>
        }
      </div>
    }

    <!-- Feedback for Unmet Criteria -->
    @if (strengthResult.feedback.length > 0) {
      <div class="feedback mt-3 text-xs text-gray-500">
        <p class="italic">To strengthen: {{ strengthResult.feedback.join(', ') }}</p>
      </div>
    }
  }
</div>
